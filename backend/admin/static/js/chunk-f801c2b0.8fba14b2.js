(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f801c2b0"],{"5ad2":function(e,t,o){"use strict";o.d(t,"c",(function(){return i})),o.d(t,"e",(function(){return n})),o.d(t,"a",(function(){return a})),o.d(t,"f",(function(){return s})),o.d(t,"d",(function(){return c})),o.d(t,"b",(function(){return u}));var r=o("b775"),l=o("6793");function i(){return Object(r["a"])({url:l["a"].problemCategoryCount,method:"get"})}function n(e,t,o,i){var n={pageNum:e,pageSize:t};return o&&i&&(n[o]=i),Object(r["a"])({url:"".concat(l["a"].problemCategoryBase,"/"),method:"get",params:n})}function a(e,t,o,i){return Object(r["a"])({url:"".concat(l["a"].problemCategoryBase,"/"),method:"post",data:{name:e,startTime:t,endTime:o,viewAfterEnd:i}})}function s(e,t,o,i,n){return Object(r["a"])({url:"".concat(l["a"].problemCategoryBase,"/").concat(e),method:"put",data:{name:t,startTime:o,endTime:i,viewAfterEnd:n}})}function c(e){return Object(r["a"])({url:"".concat(l["a"].problemCategoryBase,"/").concat(e),method:"get"})}function u(e){return Object(r["a"])({url:"".concat(l["a"].problemCategoryBase,"/").concat(e),method:"delete"})}},"6c02":function(e,t,o){"use strict";var r={convertDateToString:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}};t["a"]=r},"9d9a":function(e,t,o){"use strict";o.d(t,"c",(function(){return i})),o.d(t,"e",(function(){return n})),o.d(t,"d",(function(){return a})),o.d(t,"a",(function(){return s})),o.d(t,"f",(function(){return c})),o.d(t,"b",(function(){return u}));var r=o("b775"),l=o("6793");function i(){return Object(r["a"])({url:l["a"].problemCount,method:"get"})}function n(e,t,o,i){var n={pageNum:e,pageSize:t};return o&&i&&(n[o]=i),Object(r["a"])({url:"".concat(l["a"].problemBase,"/"),method:"get",params:n})}function a(e){return Object(r["a"])({url:"".concat(l["a"].problemBase,"/").concat(e),method:"get"})}function s(e,t,o,i,n,a,s,c,u){return Object(r["a"])({url:"".concat(l["a"].problemBase,"/"),method:"post",data:{title:e,description:t,sampleOutput:o,hint:i,answer:n,databaseId:a,difficulty:s,isUpdate:c,selectAfterUpdate:u}})}function c(e,t,o,i,n,a,s,c,u,p){return Object(r["a"])({url:"".concat(l["a"].problemBase,"/").concat(e),method:"put",data:{title:t,description:o,sampleOutput:i,hint:n,answer:a,databaseId:s,difficulty:c,isUpdate:u,selectAfterUpdate:p}})}function u(e){return Object(r["a"])({url:"".concat(l["a"].problemBase,"/").concat(e),method:"delete"})}},b85c:function(e,t,o){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function l(e,t){if(e){if("string"===typeof e)return r(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(e,t):void 0}}function i(e,t){var o="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=l(e))||t&&e&&"number"===typeof e.length){o&&(e=o);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a=!0,s=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return a=e.done,e},e:function(e){s=!0,n=e},f:function(){try{a||null==o["return"]||o["return"]()}finally{if(s)throw n}}}}o.d(t,"a",(function(){return i}))},c297:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("el-form",{ref:"problemCategoryDetail",attrs:{model:e.problemCategoryDetail,rules:e.checkRules,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"题目集ID",prop:"id"}},[o("el-input",{attrs:{placeholder:"请输入题目集ID",type:"number",disabled:""},model:{value:e.problemCategoryDetail.id,callback:function(t){e.$set(e.problemCategoryDetail,"id",t)},expression:"problemCategoryDetail.id"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"题目集名称",prop:"name"}},[o("el-input",{attrs:{placeholder:"请输入题目集名称"},model:{value:e.problemCategoryDetail.name,callback:function(t){e.$set(e.problemCategoryDetail,"name",t)},expression:"problemCategoryDetail.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"题目集起止时间",prop:"duration"}},[o("div",{staticClass:"block"},[o("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.problemCategoryDetail.duration,callback:function(t){e.$set(e.problemCategoryDetail,"duration",t)},expression:"problemCategoryDetail.duration"}})],1)]),e._v(" "),o("el-form-item",{attrs:{label:"题目集结束后学生能否查看题目",prop:"viewAfterEnd"}},[o("el-switch",{attrs:{"active-text":"能","inactive-text":"否"},model:{value:e.problemCategoryDetail.viewAfterEnd,callback:function(t){e.$set(e.problemCategoryDetail,"viewAfterEnd",t)},expression:"problemCategoryDetail.viewAfterEnd"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"题目列表"}},[o("div",{staticClass:"operation-button"},[o("el-button",{attrs:{type:"primary"},on:{click:e.openAddFromProblemListDialog}},[o("i",{staticClass:"el-icon-plus"}),e._v(" 添加题目\n        ")]),e._v(" "),e.problemCollectionProblemListSelection&&e.problemCollectionProblemListSelection.length>0?o("el-button",{attrs:{type:"danger"},on:{click:e.onDeleteCollectionProblemSelection}},[o("i",{staticClass:"el-icon-delete"}),e._v(" 移除所选的"+e._s(e.problemCollectionProblemListSelection?e.problemCollectionProblemListSelection.length+"个":"")+"题目\n        ")]):e._e()],1),e._v(" "),o("v-table",{staticStyle:{width:"100%"},attrs:{width:800,"is-horizontal-resize":"","is-loading":e.problemCollectionListIsLoading,columns:e.problemCollectionTableConfig.columns,"table-data":e.problemCollectionTableConfig.tableData,"row-hover-color":"#eee","row-click-color":"#edf7ff","select-all":e.onProblemCollectionListSelectAll,"select-change":e.onProblemCollectionListSelectChange,"cell-edit-done":e.problemScoreEditDone}}),e._v(" "),o("div",{staticClass:"bd"},[o("el-pagination",{attrs:{background:"","current-page":e.problemCollectionListPageNum,"page-sizes":[10,20,30],"page-size":e.problemCollectionListPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.problemCollectionListTotalItems},on:{"size-change":e.onProblemCollectionListPageSizeChange,"current-change":e.onProblemCollectionListPageChange}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"允许的用户组"}},[o("div",{staticClass:"operation-button"},[o("el-button",{attrs:{type:"primary"},on:{click:e.openAddFromUserGroupListDialog}},[o("i",{staticClass:"el-icon-plus"}),e._v(" 添加用户组\n        ")]),e._v(" "),e.problemCategoryAllowUserGroupListSelection&&e.problemCategoryAllowUserGroupListSelection.length>0?o("el-button",{attrs:{type:"danger"},on:{click:e.onDeleteProblemCategoryAllowUserGroupListSelection}},[o("i",{staticClass:"el-icon-delete"}),e._v(" 移除所选"+e._s(e.problemCategoryAllowUserGroupListSelection?e.problemCategoryAllowUserGroupListSelection.length+"个":"")+"个用户组的权限\n        ")]):e._e()],1),e._v(" "),o("v-table",{staticStyle:{width:"100%"},attrs:{width:100,"is-horizontal-resize":"","is-loading":e.problemCategoryAllowUserGroupListIsLoading,columns:e.problemCategoryAllowUserGroupListTableConfig.columns,"table-data":e.problemCategoryAllowUserGroupListTableConfig.tableData,"row-hover-color":"#eee","row-click-color":"#edf7ff","select-all":e.onProblemCategoryAllowUserGroupListSelectAll,"select-change":e.onProblemCategoryAllowUserGroupListSelectChange}}),e._v(" "),o("div",{staticClass:"bd"},[o("el-pagination",{attrs:{background:"","current-page":e.problemCategoryAllowUserGroupListPageNum,"page-sizes":[10,20,30],"page-size":e.problemCategoryAllowUserGroupListPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.problemCategoryAllowUserGroupListTotalItems},on:{"size-change":e.onProblemCategoryAllowUserGroupListPageSizeChange,"current-change":e.onProblemCategoryAllowUserGroupListPageChange}})],1)],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("保存")]),e._v(" "),o("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1),e._v(" "),o("el-dialog",{attrs:{title:"选择题目添加到题目集",visible:e.addFromProblemListDialogVisible,width:"80%"},on:{"update:visible":function(t){e.addFromProblemListDialogVisible=t}}},[o("el-table",{ref:"problemListTable",staticStyle:{width:"100%"},attrs:{data:e.problemListTableData,"tooltip-effect":"dark"},on:{select:e.onProblemListSelect,"select-all":e.onProblemListSelectAll}},[o("el-table-column",{attrs:{type:"selection",align:"center",width:"50"}}),e._v(" "),o("el-table-column",{attrs:{prop:"problemId",label:"题目ID",align:"center",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{prop:"databaseName",label:"数据库","min-width":"1",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"problemTitle",label:"题目标题",align:"center","min-width":"3","show-overflow-tooltip":!0}}),e._v(" "),o("el-table-column",{attrs:{prop:"problemDifficulty",label:"题目难度",align:"center",width:"100",formatter:function(e,t,o,r){for(var l="",i=0;i<e.problemDifficulty;i++)l+="★";return l}}})],1),e._v(" "),o("div",{staticClass:"bd"},[o("el-pagination",{attrs:{background:"","current-page":e.problemListPageNum,"page-sizes":[10,20,30],"page-size":e.problemListPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.problemListTotalItems},on:{"size-change":e.onProblemListPageSizeChange,"current-change":e.onProblemListPageChange}})],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.selectedProblemIds&&0!==e.selectedProblemIds.length?[o("p",[e._v("将新增 "),o("strong",[e._v(e._s(e.selectedProblemIds.length))]),e._v(" 道题目到题目集中")])]:e._e(),e._v(" "),e.selectedProblemIds&&0!==e.selectedProblemIds.length?o("el-button",{attrs:{type:"warning"},on:{click:e.resetSelectedProblemIds}},[e._v("重 置")]):e._e(),e._v(" "),o("el-button",{attrs:{type:"danger"},on:{click:function(t){e.addFromProblemListDialogVisible=!1}}},[e._v("关 闭")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.onAddProblem}},[e._v("确 定")])],2)],1),e._v(" "),o("el-dialog",{attrs:{title:"选择题目添加到题目集",visible:e.addFromUserGroupListDialogVisible,width:"80%"},on:{"update:visible":function(t){e.addFromUserGroupListDialogVisible=t}}},[o("el-table",{ref:"userGroupListTable",staticStyle:{width:"100%"},attrs:{data:e.userGroupListTableData,"tooltip-effect":"dark"},on:{select:e.onUserGroupListSelect,"select-all":e.onUserGroupListSelectAll}},[o("el-table-column",{attrs:{type:"selection",align:"center",width:"50"}}),e._v(" "),o("el-table-column",{attrs:{prop:"id",label:"用户组ID",align:"center","min-width":"1"}}),e._v(" "),o("el-table-column",{attrs:{prop:"name",label:"用户组名称","min-width":"1",align:"center"}})],1),e._v(" "),o("div",{staticClass:"bd"},[o("el-pagination",{attrs:{background:"","current-page":e.userGroupListPageNum,"page-sizes":[10,20,30],"page-size":e.userGroupListPageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.userGroupListTotalItems},on:{"size-change":e.onUserGroupPageSizeChange,"current-change":e.onUserGroupListPageChange}})],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.selectedUserGroupIds&&0!==e.selectedUserGroupIds.length?[o("p",[e._v("将新增 "),o("strong",[e._v(e._s(e.selectedUserGroupIds.length))]),e._v(" 道题目到题目集中")])]:e._e(),e._v(" "),e.selectedUserGroupIds&&0!==e.selectedUserGroupIds.length?o("el-button",{attrs:{type:"warning"},on:{click:e.resetSelectedUserGroupIds}},[e._v("重 置")]):e._e(),e._v(" "),o("el-button",{attrs:{type:"danger"},on:{click:function(t){e.addFromUserGroupListDialogVisible=!1}}},[e._v("关 闭")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.onAddUserGroup}},[e._v("确 定")])],2)],1)],1)],1)},l=[],i=(o("7f7f"),o("b85c")),n=(o("96cf"),o("1da1")),a=(o("ac6a"),o("34bf"),o("e5fb")),s=o("6c02"),c=o("5ad2"),u=o("b775"),p=o("6793");function d(e,t,o,r){var l={pageNum:e,pageSize:t};return o&&r&&(l[o]=r),Object(u["a"])({url:"".concat(p["a"].problemCollectionBase,"/"),method:"get",params:l})}function m(e,t){return Object(u["a"])({url:"".concat(p["a"].problemCollectionUpdateProblemScore,"/").concat(e),method:"put",data:{newProblemScore:t}})}function b(e){return Object(u["a"])({url:"".concat(p["a"].problemCollectionProblemIds,"/").concat(e),method:"get"})}function g(e){return Object(u["a"])({url:p["a"].problemCollectionBulk,method:"delete",data:e})}function f(e,t){return Object(u["a"])({url:"".concat(p["a"].problemCollectionBulk,"/").concat(e),method:"post",data:t})}var h=o("9d9a");function C(e){return Object(u["a"])({url:"".concat(p["a"].problemCategoryPermissionGetUserGroupIds,"/").concat(e),method:"get"})}function L(e,t,o){var r={pageNum:t,pageSize:o};return Object(u["a"])({url:"".concat(p["a"].problemCategoryPermissionGetUserGroupDetail,"/").concat(e),method:"get",params:r})}function y(e){return Object(u["a"])({url:p["a"].problemCategoryPermissionBulk,method:"delete",data:e})}function v(e,t){return Object(u["a"])({url:"".concat(p["a"].problemCategoryPermissionBulk,"/").concat(e),method:"post",data:t})}var P=o("fa8d"),w={components:{VTable:a["VTable"]},data:function(){return{checkRules:{name:[{required:!0,message:"题目集名称不能为空",trigger:"blur"}],duration:[{required:!0,message:"题目集起止时间不能为空",trigger:"blur"}],viewAfterEnd:[{required:!0,message:"必须确定题目集结束后学生能否查看题目",trigger:"blur"}]},collectionProblemIds:[],problemCategoryDetail:{id:"",name:"",duration:[],viewAfterEnd:!0},addFromUserGroupListDialogVisible:!1,problemCategoryAllowUserGroupListTotalItems:0,problemCategoryAllowUserGroupListPageSize:10,problemCategoryAllowUserGroupListPageNum:1,problemCategoryAllowUserGroupListSelection:[],problemCategoryAllowUserGroupListTableConfig:{tableData:[],columns:[{width:50,titleAlign:"center",columnAlign:"center",type:"selection"},{field:"userGroupId",title:"用户组ID",width:50,titleAlign:"center",columnAlign:"center",isResize:!0},{field:"userGroupName",title:"用户组名称",width:50,titleAlign:"center",columnAlign:"center",isResize:!0}]},problemCategoryAllowUserGroupListIsLoading:!1,problemCollectionListPageNum:1,problemCollectionListPageSize:10,problemCollectionListTotalItems:0,problemCollectionListIsLoading:!1,problemCollectionTableConfig:{tableData:[],columns:[{width:50,titleAlign:"center",columnAlign:"center",type:"selection"},{field:"problemId",title:"题目ID",width:80,titleAlign:"center",columnAlign:"center",isResize:!0},{field:"databaseName",title:"数据库名称",width:100,titleAlign:"center",columnAlign:"center",isResize:!0},{field:"problemTitle",title:"题目标题",width:370,titleAlign:"center",columnAlign:"left",isResize:!0},{field:"problemDifficulty",title:"难度",width:100,titleAlign:"center",columnAlign:"center",isResize:!0,formatter:function(e,t,o,r){for(var l="",i=0;i<e.problemDifficulty;i++)l+="★";return l}},{field:"problemScore",title:"题目分值",width:100,isEdit:!0,titleAlign:"center",columnAlign:"center",isResize:!0}]},problemCollectionProblemListSelection:[],addFromProblemListDialogVisible:!1,problemListPageNum:1,problemListPageSize:10,problemListTotalItems:0,problemListTableData:[],selectedProblemIds:[],pickerOptions:{shortcuts:[{text:"未来一周",onClick:function(e){var t=new Date,o=new Date;o.setTime(t.getTime()+6048e5),e.$emit("pick",[t,o])}},{text:"未来一个月",onClick:function(e){var t=new Date,o=new Date;o.setTime(t.getTime()+2592e6),e.$emit("pick",[t,o])}}]},userGroupListPageNum:1,userGroupListPageSize:10,userGroupListTableData:[],userGroupListTotalItems:0,selectedUserGroupIds:[],categoryAllowUserGroupIds:[]}},computed:{problemCategoryId:function(){return this.$route.params.id}},mounted:function(){this.getProblemCategoryDetail(this.problemCategoryId),this.getProblemCollectionList(this.problemCategoryId),this.getProblemCategoryAllowUserGroupList(this.problemCategoryId)},methods:{onAddUserGroup:function(){var e=this;this.selectedUserGroupIds&&0!==this.selectedUserGroupIds.length?this.handleResponse(v(this.problemCategoryId,this.selectedUserGroupIds),"添加用户组",(function(t){if(t.data.success&&0===t.data.success.length)e.$message.error("添加用户组失败，请稍后再试");else if((t.data.fail&&t.data.fail.length)>0||(t.data.duplicated&&t.data.duplicated.length)>0){var o="成功执行添加操作";t.data.fail.length>0&&(o+="，部分用户组添加失败："+t.data.fail),t.data.duplicated.length>0&&(o+="，部分用户组已拥有题目集权限："+t.data.duplicated),e.$message({message:o,type:"warning"})}else e.$message.success("添加用户组成功");e.addFromUserGroupListDialogVisible=!1,e.selectedUserGroupIds.length=0,e.getProblemCategoryAllowUserGroupList(e.problemCategoryId)})):this.$message.error("请选择要赋予题目集权限的用户组")},onUserGroupListSelect:function(e,t){var o=this,r=e.length&&-1!==e.indexOf(t);if(r)e.forEach((function(e){-1===o.categoryAllowUserGroupIds.indexOf(e.id)&&-1===o.selectedUserGroupIds.indexOf(e.id)&&o.selectedUserGroupIds.push(e.id)}));else{var l=this.selectedUserGroupIds.indexOf(t.problemId);-1!==l&&this.selectedUserGroupIds.splice(l,1)}},onUserGroupListSelectAll:function(e){var t=this;e.length>0?e.forEach((function(e){-1===t.categoryAllowUserGroupIds.indexOf(e.id)&&-1===t.selectedUserGroupIds.indexOf(e.id)&&t.selectedUserGroupIds.push(e.id)})):this.problemListTableData.forEach((function(e){if(-1===t.categoryAllowUserGroupIds.indexOf(e.id)){var o=t.selectedUserGroupIds.indexOf(e.id);-1!==o&&t.selectedUserGroupIds.splice(o,1)}else t.$refs.userGroupListTable.toggleRowSelection(e,!0)}))},resetSelectedUserGroupIds:function(){this.selectedUserGroupIds.length=0,this.refreshUserGroupList()},onUserGroupPageSizeChange:function(e){this.userGroupListPageSize=e,this.refreshUserGroupList()},onUserGroupListPageChange:function(e){this.userGroupListPageNum=e,this.refreshUserGroupList()},getUserGroupList:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.handleResponse(Object(P["e"])(this.userGroupListPageNum,this.userGroupListPageSize),"获取用户组列表",(function(e){t.userGroupListTableData=e.data.records,t.userGroupListTotalItems=e.data.total}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getUserGroupIdsByProblemCategoryId:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.handleResponse(C(t),"获取有题目集权限的全部用户组",(function(e){o.categoryAllowUserGroupIds=e.data}));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),refreshUserGroupList:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getUserGroupList();case 2:t=Object(i["a"])(this.userGroupListTableData);try{for(t.s();!(o=t.n()).done;)r=o.value,-1===this.categoryAllowUserGroupIds.indexOf(r.id)&&-1===this.selectedUserGroupIds.indexOf(r.id)||this.$refs.userGroupListTable.toggleRowSelection(r,!0)}catch(l){t.e(l)}finally{t.f()}case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openAddFromUserGroupListDialog:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.addFromUserGroupListDialogVisible=!0,e.next=3,this.getUserGroupIdsByProblemCategoryId(this.problemCategoryId);case 3:return e.next=5,this.refreshUserGroupList();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onDeleteProblemCategoryAllowUserGroupListSelection:function(){var e=this;this.$confirm("是否移除所选".concat(this.problemCategoryAllowUserGroupListSelection?this.problemCategoryAllowUserGroupListSelection.length+"个":"","用户组的权限?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.problemCategoryAllowUserGroupListSelection&&e.problemCategoryAllowUserGroupListSelection.length>0?e.handleResponse(y(e.problemCategoryAllowUserGroupListSelection),"移除用户组权限",(function(t){t.data.success&&0===t.data.success.length?e.$message.error("从题目集中移除所选用户组的权限失败，请稍后再试"):t.data.fail&&t.data.fail.length>0?(e.problemCategoryAllowUserGroupListSelection.length=0,e.problemCategoryAllowUserGroupListPageNum=1,e.$message({message:"成功执行移除操作，但部分用户组移除失败："+t.data.fail,type:"warning"})):(e.problemCategoryAllowUserGroupListSelection.length=0,e.problemCategoryAllowUserGroupListPageNum=1,e.$message.success("成功移除所选用户组的权限")),e.getProblemCategoryAllowUserGroupList(e.problemCategoryId)})):e.$message.error("请检查是否选择了要移除的用户组")}))},onProblemCategoryAllowUserGroupListSelectAll:function(e){var t=this;e.length>0?e.forEach((function(e){-1===t.problemCategoryAllowUserGroupListSelection.indexOf(e.id)&&t.problemCategoryAllowUserGroupListSelection.push(e.id)})):this.problemCategoryAllowUserGroupListTableConfig.tableData.forEach((function(e){var o=t.problemCategoryAllowUserGroupListSelection.indexOf(e.id);-1!==o&&t.problemCategoryAllowUserGroupListSelection.splice(o,1)}))},onProblemCategoryAllowUserGroupListSelectChange:function(e,t){var o=this,r=e.length&&-1!==e.indexOf(t);if(r)e.forEach((function(e){-1===o.problemCategoryAllowUserGroupListSelection.indexOf(e.id)&&o.problemCategoryAllowUserGroupListSelection.push(e.id)}));else{var l=this.problemCategoryAllowUserGroupListSelection.indexOf(t.id);-1!==l&&this.problemCategoryAllowUserGroupListSelection.splice(l,1)}},onProblemCategoryAllowUserGroupListPageChange:function(e){this.problemCategoryAllowUserGroupListPageNum=e,this.getProblemCategoryAllowUserGroupList(this.problemCategoryId)},onProblemCategoryAllowUserGroupListPageSizeChange:function(e){this.problemCategoryAllowUserGroupListPageSize=e,this.getProblemCategoryAllowUserGroupList(this.problemCategoryId)},getProblemCategoryAllowUserGroupList:function(e){var t=this;this.problemCategoryAllowUserGroupListIsLoading=!0,this.handleResponse(L(e,this.problemCategoryAllowUserGroupListPageNum,this.problemCategoryAllowUserGroupListPageSize),"获取允许的用户组列表",(function(e){t.problemCategoryAllowUserGroupListTableConfig.tableData=e.data.records,t.problemCategoryAllowUserGroupListTableConfig.tableData.forEach((function(e){-1!==t.problemCategoryAllowUserGroupListSelection.indexOf(e.id)&&(e._checked=!0)})),t.problemCategoryAllowUserGroupListTotalItems=e.data.total}),null,null,(function(){t.problemCategoryAllowUserGroupListIsLoading=!1}))},getProblemCategoryDetail:function(e){var t=this;this.handleResponse(Object(c["d"])(e),"获取题目集详情",(function(e){t.problemCategoryDetail.id=e.data.id,t.problemCategoryDetail.name=e.data.name,t.problemCategoryDetail.viewAfterEnd=e.data.viewAfterEnd,t.problemCategoryDetail.duration=[new Date(e.data.startTime),new Date(e.data.endTime)]}))},getProblemCollectionList:function(e){var t=this;this.problemCollectionListIsLoading=!0,this.handleResponse(d(this.problemCollectionListPageNum,this.problemCollectionListPageSize,"categoryId",e),"获取题目集的题目列表",(function(e){t.problemCollectionTableConfig.tableData=e.data.records,t.problemCollectionTableConfig.tableData.forEach((function(e){-1!==t.problemCollectionProblemListSelection.indexOf(e.id)&&(e._checked=!0)})),t.problemCollectionListTotalItems=e.data.total}),null,null,(function(){t.problemCollectionListIsLoading=!1}))},openAddFromProblemListDialog:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.addFromProblemListDialogVisible=!0,e.next=3,this.getProblemIdsByProblemCategoryId(this.problemCategoryId);case 3:return e.next=5,this.refreshProblemList();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),refreshProblemList:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getProblemList();case 2:t=Object(i["a"])(this.problemListTableData);try{for(t.s();!(o=t.n()).done;)r=o.value,-1===this.collectionProblemIds.indexOf(r.problemId)&&-1===this.selectedProblemIds.indexOf(r.problemId)||this.$refs.problemListTable.toggleRowSelection(r,!0)}catch(l){t.e(l)}finally{t.f()}case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getProblemList:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.handleResponse(Object(h["e"])(this.problemListPageNum,this.problemListPageSize),"获取题目列表",(function(e){t.problemListTableData=e.data.records,t.problemListTotalItems=e.data.total}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getProblemIdsByProblemCategoryId:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.handleResponse(b(t),"获取题目集包含的全部题目ID",(function(e){o.collectionProblemIds=e.data}));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onProblemCollectionListSelectAll:function(e){var t=this;e.length>0?e.forEach((function(e){-1===t.problemCollectionProblemListSelection.indexOf(e.id)&&t.problemCollectionProblemListSelection.push(e.id)})):this.problemCollectionTableConfig.tableData.forEach((function(e){var o=t.problemCollectionProblemListSelection.indexOf(e.id);-1!==o&&t.problemCollectionProblemListSelection.splice(o,1)}))},onProblemCollectionListSelectChange:function(e,t){var o=this,r=e.length&&-1!==e.indexOf(t);if(r)e.forEach((function(e){-1===o.problemCollectionProblemListSelection.indexOf(e.id)&&o.problemCollectionProblemListSelection.push(e.id)}));else{var l=this.problemCollectionProblemListSelection.indexOf(t.id);-1!==l&&this.problemCollectionProblemListSelection.splice(l,1)}},onProblemListSelectAll:function(e){var t=this;e.length>0?e.forEach((function(e){-1===t.collectionProblemIds.indexOf(e.problemId)&&-1===t.selectedProblemIds.indexOf(e.problemId)&&t.selectedProblemIds.push(e.problemId)})):this.problemListTableData.forEach((function(e){if(-1===t.collectionProblemIds.indexOf(e.problemId)){var o=t.selectedProblemIds.indexOf(e.problemId);-1!==o&&t.selectedProblemIds.splice(o,1)}else t.$refs.problemListTable.toggleRowSelection(e,!0)}))},onDeleteCollectionProblemSelection:function(){var e=this;this.$confirm("是否从题目集中移除所选的".concat(this.problemCollectionProblemListSelection?this.problemCollectionProblemListSelection.length+"个":"","题目?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.problemCollectionProblemListSelection&&e.problemCollectionProblemListSelection.length>0?e.handleResponse(g(e.problemCollectionProblemListSelection),"删除题目",(function(t){t.data.success&&0===t.data.success.length?e.$message.error("从题目集中移除选中的题目失败，请稍后再试"):t.data.fail&&t.data.fail.length>0?(e.problemCollectionProblemListSelection.length=0,e.problemCollectionListPageNum=1,e.$message({message:"成功执行移除操作，但部分题目移除失败："+t.data.fail,type:"warning"})):(e.problemCollectionProblemListSelection.length=0,e.problemCollectionListPageNum=1,e.$message.success("成功从题目集中移除选中的题目")),e.getProblemCollectionList(e.problemCategoryId)})):e.$message.error("请检查是否选择了要删除的题目")}))},onAddProblem:function(){var e=this;this.selectedProblemIds&&0!==this.selectedProblemIds.length?this.handleResponse(f(this.problemCategoryId,this.selectedProblemIds),"添加题目",(function(t){if(t.data.success&&0===t.data.success.length)e.$message.error("添加题目失败，请稍后再试");else if((t.data.fail&&t.data.fail.length)>0||(t.data.duplicated&&t.data.duplicated.length)>0){var o="成功执行添加操作";t.data.fail.length>0&&(o+="，部分题目添加失败："+t.data.fail),t.data.duplicated.length>0&&(o+="，部分题目已存在题目集中："+t.data.duplicated),e.$message({message:o,type:"warning"})}else e.$message.success("添加题目成功");e.addFromProblemListDialogVisible=!1,e.selectedProblemIds.length=0,e.getProblemCollectionList(e.problemCategoryId)})):this.$message.error("请选择要添加到题目集中的题目")},onProblemListPageChange:function(e){this.problemListPageNum=e,this.refreshProblemList()},onProblemListPageSizeChange:function(e){this.problemListPageSize=e,this.refreshProblemList()},onProblemCollectionListPageChange:function(e){this.problemCollectionListPageNum=e,this.getProblemCollectionList(this.problemCategoryId)},onProblemCollectionListPageSizeChange:function(e){this.problemCollectionListPageSize=e,this.getProblemCollectionList(this.problemCategoryId)},resetSelectedProblemIds:function(){this.selectedProblemIds.length=0,this.refreshProblemList()},onSave:function(){var e=this;this.$refs.problemCategoryDetail.validate((function(t){if(t){var o=e.$route.params.id,r={id:e.problemCategoryDetail.id,name:e.problemCategoryDetail.name.trim(),startTime:s["a"].convertDateToString(e.problemCategoryDetail.duration[0]),endTime:s["a"].convertDateToString(e.problemCategoryDetail.duration[1]),viewAfterEnd:e.problemCategoryDetail.viewAfterEnd};e.handleResponse(Object(c["f"])(o,r.name,r.startTime,r.endTime,r.viewAfterEnd),"更新题目集",(function(t){e.$message.success("更新题目集成功"),e.$router.back(-1)}))}else e.$message.error("请确认所有项目均填写正确")}))},onCancel:function(){this.$router.back(-1)},isPositiveInteger:function(e){return/^[0-9]*[1-9][0-9]*$/.test(e)},problemScoreEditDone:function(e,t,o,r,l){var i=this;e!==t&&(""!==e?this.isPositiveInteger(e)?(this.problemCollectionTableConfig.tableData[o][l]=parseInt(e),this.handleResponse(m(r.id,parseInt(e)),"修改题目分值",(function(e){i.$message.success(e.message)}),null,(function(){i.problemCollectionTableConfig.tableData[o][l]=parseInt(t)}))):this.$message.error("请输入一个正整数"):this.$message.error("请输入题目分值"))},onProblemListSelect:function(e,t){var o=this,r=e.length&&-1!==e.indexOf(t);if(r)e.forEach((function(e){-1===o.collectionProblemIds.indexOf(e.problemId)&&-1===o.selectedProblemIds.indexOf(e.problemId)&&o.selectedProblemIds.push(e.problemId)}));else{var l=this.selectedProblemIds.indexOf(t.problemId);-1!==l&&this.selectedProblemIds.splice(l,1)}}}},G=w,I=(o("dea4"),o("2877")),U=Object(I["a"])(G,r,l,!1,null,"7324866c",null);t["default"]=U.exports},d697:function(e,t,o){},dea4:function(e,t,o){"use strict";o("d697")},fa8d:function(e,t,o){"use strict";o.d(t,"c",(function(){return i})),o.d(t,"e",(function(){return n})),o.d(t,"a",(function(){return a})),o.d(t,"f",(function(){return s})),o.d(t,"d",(function(){return c})),o.d(t,"b",(function(){return u}));var r=o("b775"),l=o("6793");function i(){return Object(r["a"])({url:l["a"].userGroupCount,method:"get"})}function n(e,t,o,i){var n={pageNum:e,pageSize:t};return o&&i&&(n[o]=i),Object(r["a"])({url:"".concat(l["a"].userGroupBase,"/"),method:"get",params:n})}function a(e){return Object(r["a"])({url:"".concat(l["a"].userGroupBase,"/"),method:"post",data:{name:e}})}function s(e,t){return Object(r["a"])({url:"".concat(l["a"].userGroupBase,"/").concat(e),method:"put",data:{name:t}})}function c(e){return Object(r["a"])({url:"".concat(l["a"].userGroupBase,"/").concat(e),method:"get"})}function u(e){return Object(r["a"])({url:"".concat(l["a"].userGroupBase,"/").concat(e),method:"delete"})}}}]);