(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39fe9536"],{"211c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"operation-button"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入搜索关键字"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch(e)}},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}}),t._v(" "),a("el-select",{model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}},t._l(t.searchTypeList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.onSearch}},[a("svg-icon",{attrs:{"icon-class":"search"}}),t._v(" 搜索\n    ")],1),t._v(" "),t.inSearch?a("el-button",{attrs:{type:"primary"},on:{click:t.onCancelSearch}},[a("i",{staticClass:"el-icon-close"}),t._v(" 取消搜索\n    ")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.onNewDatabase}},[a("i",{staticClass:"el-icon-plus"}),t._v(" 新建数据库\n    ")])],1),t._v(" "),[a("v-table",{staticStyle:{width:"100%"},attrs:{"is-horizontal-resize":"","is-loading":t.isLoading,columns:t.tableConfig.columns,"table-data":t.tableConfig.tableData,"row-hover-color":"#eee","row-click-color":"#edf7ff"},on:{"on-custom-comp":t.onTableOperation}})],t._v(" "),[a("div",{staticClass:"bd"},[a("v-pagination",{attrs:{"show-paging-count":3,total:t.totalItems,"page-size":t.pageSize,layout:["total","sizer","prev","pager","next","jumper"]},on:{"page-change":t.pageChange,"page-size-change":t.pageSizeChange}})],1)]],2)},i=[],c=(a("7f7f"),a("34bf"),a("e5fb")),o=a("c48b"),s={components:{VTable:c["VTable"],VPagination:c["VPagination"]},data:function(){return{searchTypeList:[{label:"数据库ID",value:"id"},{label:"数据库名称",value:"name"}],searchType:"id",inSearch:!1,searchKeyword:"",pageNum:1,pageSize:20,totalItems:0,isLoading:!1,tableConfig:{tableData:[],columns:[{field:"id",title:"数据库ID",width:80,titleAlign:"center",columnAlign:"center",isResize:!0,formatter:function(t,e,a,n){return'<a href="#/database/edit/'.concat(t.id,'">').concat(t.id,"</a>")}},{field:"name",title:"数据库名称",width:280,titleAlign:"center",columnAlign:"center",isResize:!0,formatter:function(t,e,a,n){return'<a href="#/database/edit/'.concat(t.id,'" title="').concat(t.name,'">').concat(t.name,"</a>")}},{field:"action",title:"操作",width:80,titleAlign:"center",columnAlign:"center",isResize:!0,componentName:"common-operation-button"}]}}},mounted:function(){this.getDatabaseList()},methods:{onSearch:function(){var t=this,e=this.searchKeyword.trim();this.pageNum=1,0===e.length?this.$message.error("请输入关键字后再进行搜索"):(this.isLoading=!0,this.handleResponse(Object(o["f"])(this.pageNum,this.pageSize,this.searchType,e),"搜索数据库",(function(e){0===e.data.total&&t.$message({type:"warning",message:"未找到相关数据库"}),t.tableConfig.tableData=e.data.records,t.totalItems=e.data.total,t.inSearch=!0}),null,null,(function(){t.isLoading=!1})))},onCancelSearch:function(){this.inSearch=!1,this.getDatabaseList()},onNewDatabase:function(){this.$router.push({path:"/database/add/"})},onTableOperation:function(t){var e=this,a=t.index,n=this.tableConfig.tableData[a].id;"delete"===t.type?this.$confirm("此操作将永久删除该数据库, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.handleResponse(Object(o["b"])(n),"删除数据库",(function(){e.$message.success("成功删除数据库！"),e.getDatabaseList()}))})):"edit"===t.type&&this.$router.push({path:"/database/edit/"+n})},pageChange:function(t){this.pageNum=t,this.inSearch?this.onSearch():this.getDatabaseList()},pageSizeChange:function(t){this.pageSize=t,this.inSearch?this.onSearch():this.getDatabaseList()},getDatabaseList:function(){var t=this;this.isLoading=!0,this.handleResponse(Object(o["f"])(this.pageNum,this.pageSize),"获取数据库列表",(function(e){t.tableConfig.tableData=e.data.records,t.totalItems=e.data.total}),null,null,(function(){t.isLoading=!1}))}}},r=s,l=(a("458a"),a("2877")),u=Object(l["a"])(r,n,i,!1,null,"c421355c",null);e["default"]=u.exports},"458a":function(t,e,a){"use strict";a("cea3")},c48b:function(t,e,a){"use strict";a.d(e,"d",(function(){return c})),a.d(e,"f",(function(){return o})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return r})),a.d(e,"g",(function(){return l})),a.d(e,"e",(function(){return u})),a.d(e,"b",(function(){return h}));var n=a("b775"),i=a("6793");function c(){return Object(n["a"])({url:i["a"].databaseCount,method:"get"})}function o(t,e,a,c){var o={pageNum:t,pageSize:e};return a&&c&&(o[a]=c),Object(n["a"])({url:"".concat(i["a"].databaseBase,"/"),method:"get",params:o})}function s(){return Object(n["a"])({url:i["a"].getAllDatabase,method:"get"})}function r(t,e,a){return Object(n["a"])({url:"".concat(i["a"].databaseBase,"/"),method:"post",data:{name:t,createTable:e,testData:a}})}function l(t,e,a,c){return Object(n["a"])({url:"".concat(i["a"].databaseBase,"/").concat(t),method:"put",data:{name:e,createTable:a,testData:c}})}function u(t){return Object(n["a"])({url:"".concat(i["a"].databaseBase,"/").concat(t),method:"get"})}function h(t){return Object(n["a"])({url:"".concat(i["a"].databaseBase,"/").concat(t),method:"delete"})}},cea3:function(t,e,a){}}]);