(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bfc8e5e6"],{"3d1f":function(e,t,a){"use strict";a("4087")},4087:function(e,t,a){},"4a3b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"problemDetail",attrs:{model:e.problemDetail,rules:e.checkRules,"label-width":"120px"}},[e.isAdd?e._e():a("el-form-item",{attrs:{label:"题目ID"}},[a("el-input",{attrs:{disabled:""},model:{value:e.problemDetail.id,callback:function(t){e.$set(e.problemDetail,"id",t)},expression:"problemDetail.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"题目标题",prop:"title"}},[a("el-input",{model:{value:e.problemDetail.title,callback:function(t){e.$set(e.problemDetail,"title",t)},expression:"problemDetail.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"题目难度",prop:"difficulty"}},[a("el-rate",{attrs:{"show-text":"",texts:[1,2,3,4,5]},model:{value:e.problemDetail.difficulty,callback:function(t){e.$set(e.problemDetail,"difficulty",t)},expression:"problemDetail.difficulty"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据库",prop:"databaseId"}},[a("el-select",{attrs:{placeholder:"选择数据库"},model:{value:e.problemDetail.databaseId,callback:function(t){e.$set(e.problemDetail,"databaseId",t)},expression:"problemDetail.databaseId"}},e._l(e.databaseList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e._v(" "),e.problemDetail.databaseId?a("el-button",{on:{click:function(t){return e.getDatabaseDetail(e.problemDetail.databaseId,"createTable")}}},[e._v("查看该数据库的"),a("strong",[e._v("建表语句")])]):e._e(),e._v(" "),e.problemDetail.databaseId?a("el-button",{on:{click:function(t){return e.getDatabaseDetail(e.problemDetail.databaseId,"testData")}}},[e._v("查看该数据库的"),a("strong",[e._v("测试数据")])]):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:e.viewDatabaseDetailDialogTitle,visible:e.viewDatabaseDetailDialogVisible,width:"50%"},on:{"update:visible":function(t){e.viewDatabaseDetailDialogVisible=t}}},[a("highlight-code",{attrs:{lang:"sql"}},[e._v(e._s(e.databaseDetailCode))]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.viewDatabaseDetailDialogVisible=!1}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"题目描述",prop:"description"}},[a("tinymce",{attrs:{height:200},model:{value:e.problemDetail.description,callback:function(t){e.$set(e.problemDetail,"description",t)},expression:"problemDetail.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"表的样例",prop:"sampleOutput"}},[a("tinymce",{attrs:{height:200},model:{value:e.problemDetail.sampleOutput,callback:function(t){e.$set(e.problemDetail,"sampleOutput",t)},expression:"problemDetail.sampleOutput"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"提示",prop:"hint"}},[a("tinymce",{attrs:{height:100},model:{value:e.problemDetail.hint,callback:function(t){e.$set(e.problemDetail,"hint",t)},expression:"problemDetail.hint"}})],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:function(t){e.updateAndDeleteProblemHintDialogVisible=!0}}},[e._v("查看答案填写说明")])],1),e._v(" "),a("el-form-item",{attrs:{label:"是否带有Update操作",prop:"isUpdate"}},[a("el-switch",{attrs:{"active-text":"带有Update操作的题目","inactive-text":"常规Select题目"},model:{value:e.problemDetail.isUpdate,callback:function(t){e.$set(e.problemDetail,"isUpdate",t)},expression:"problemDetail.isUpdate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"答案",prop:"answer"}},[a("codemirror",{attrs:{options:e.cmOptions},on:{ready:e.onCmReady},model:{value:e.problemDetail.answer,callback:function(t){e.$set(e.problemDetail,"answer",t)},expression:"problemDetail.answer"}}),e._v(" "),e._e()],1),e._v(" "),e.problemDetail.isUpdate?a("el-form-item",{attrs:{label:"对有进行修改的表的Select语句",prop:"selectAfterUpdate"}},[a("codemirror",{attrs:{options:e.cmOptions},on:{ready:e.onCmReady},model:{value:e.problemDetail.selectAfterUpdate,callback:function(t){e.$set(e.problemDetail,"selectAfterUpdate",t)},expression:"problemDetail.selectAfterUpdate"}}),e._v(" "),e._e()],1):e._e(),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"warning",plain:""},on:{click:e.runCode}},[e._v("调试运行答案")])],1),e._v(" "),a("el-dialog",{attrs:{title:"答案填写说明",visible:e.updateAndDeleteProblemHintDialogVisible,width:"50%"},on:{"update:visible":function(t){e.updateAndDeleteProblemHintDialogVisible=t}}},[e._v("\n      若有表如下：\n      "),a("highlight-code",{attrs:{lang:"sql"}},[e._v("\n        CREATE TABLE `employees` (\n        `emp_no` int(11) NOT NULL,\n        `birth_date` date NOT NULL,\n        `first_name` varchar(14) NOT NULL,\n        `last_name` varchar(16) NOT NULL,\n        `gender` char(1) NOT NULL,\n        `hire_date` date NOT NULL,\n        PRIMARY KEY (`emp_no`));\n      ")]),e._v(" "),a("h3",[e._v("1. 对于select操作的题目")]),e._v(" "),a("p",[e._v("例如查找表employees中emp_no为奇数的记录")]),e._v("\n      答案只需给出任意一种可行的答案即可，例如\n      "),a("highlight-code",{attrs:{lang:"sql"}},[e._v("\n        select * from employees where emp_no % 2 = 1;\n      ")]),e._v(" "),a("h3",[e._v("2. 对于update、delete等会对表中记录进行修改的题目")]),e._v(" "),a("p",[e._v("例如删除表employees中emp_no为奇数的记录")]),e._v(" "),a("p",[e._v('则需要打开"'),a("strong",[e._v("是否带有Update操作")]),e._v('"开关')]),e._v(" "),a("p",[e._v("答案正常给出：")]),e._v(" "),a("highlight-code",{attrs:{lang:"sql"}},[e._v("\n        delete from employees where emp_no % 2 = 1;\n      ")]),e._v(" "),a("p",[e._v('之后在"'),a("strong",[e._v("对有进行修改的表的Select语句")]),e._v('"中填入对有进行修改操作的表的select *语句：')]),e._v(" "),a("highlight-code",{attrs:{lang:"sql"}},[e._v("\n        select * from employees;\n      ")]),e._v(" "),a("p",[e._v("本判题系统通过该Select语句来验证修改表格数据类题目中学生的答案是否正确的，所以请确保Select语句的正确性")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updateAndDeleteProblemHintDialogVisible=!1}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"调试运行结果",visible:e.runCodeDialogVisible,width:"50%"},on:{"update:visible":function(t){e.runCodeDialogVisible=t}}},[a("p",[a("strong",[e._v("代码：")])]),e._v(" "),a("highlight-code",{attrs:{lang:"sql"}},[e._v(e._s(e.problemDetail.answer))]),e._v(" "),a("p",[a("strong",[e._v("运行结果：")])]),e._v(" "),a("highlight-code",[e._v(e._s(e.runResult))]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.runCodeDialogVisible=!1}}},[e._v("关 闭")])],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1)],1)},n=[],r=(a("7abb"),a("efe0"),a("8f94")),o=(a("a7be"),a("ffda"),a("8c06"),a("9b74"),a("991c"),a("8c33"),a("f6b6"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tinymce-container",class:{fullscreen:e.fullscreen},style:{width:e.containerWidth}},[a("textarea",{staticClass:"tinymce-textarea",attrs:{id:e.tinymceId}}),e._v(" "),a("div",{staticClass:"editor-custom-btn-container"})])}),l=[],s=(a("ac6a"),a("c5f6"),["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak powerpaste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"]),c=s,u=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],d=u,p=a("b85c"),m=[];function b(){return window.tinymce}var f=function(e,t){var a=document.getElementById(e),i=t||function(){};if(!a){var n=document.createElement("script");n.src=e,n.id=e,document.body.appendChild(n),m.push(i);var r="onload"in n?o:l;r(n)}function o(t){t.onload=function(){this.onerror=this.onload=null;var e,a=Object(p["a"])(m);try{for(a.s();!(e=a.n()).done;){var i=e.value;i(null,t)}}catch(n){a.e(n)}finally{a.f()}m=null},t.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+e),t)}}function l(e){e.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var t,a=Object(p["a"])(m);try{for(a.s();!(t=a.n()).done;){var i=t.value;i(null,e)}}catch(n){a.e(n)}finally{a.f()}m=null}}}a&&i&&(b()?i(null,a):m.push(i))},h=f,g=a("6793"),v=a("b775");function _(e){return Object(v["a"])({url:"".concat(g["b"]).concat(g["a"].uploadImage),method:"post",data:e})}var y="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",D={name:"Tinymce",props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return["removeformat undo redo |  bullist numlist | outdent indent | forecolor | fullscreen code","bold italic blockquote | h2 p  media link | alignleft aligncenter alignright | fontsizeselect | fontselect"]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var e=this.width;return/^[\d]+(\.[\d]+)?$/.test(e)?"".concat(e,"px"):e}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(t.tinymceId).setContent(e||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var e=this;h(y,(function(t){t?e.$message.error(t.message):e.initTinymce()}))},initTinymce:function(){var e=this,t=this;window.tinymce.init({external_plugins:{powerpaste:"/powerpaste/plugin.min.js"},selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:d,menubar:this.menubar,plugins:c,font_formats:"微软雅黑=Microsoft YaHei,sans-serif;宋体=宋体;仿宋=仿宋;黑体=黑体;楷体=楷体;隶书=隶书;幼圆=幼圆",end_container_on_empty_block:!0,powerpaste_word_import:"propmt",powerpaste_html_import:"propmt",powerpaste_allow_local_images:!0,code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,paste_data_images:!0,fontsize_formats:"8pt 10pt 12pt 14pt 18pt 24pt 36pt",nonbreaking_force_tab:!0,init_instance_callback:function(a){t.value&&a.setContent(t.value),t.hasInit=!0,a.on("NodeChange Change KeyUp SetContent",(function(){e.hasChange=!0,e.$emit("input",a.getContent())}))},setup:function(e){e.on("FullscreenStateChanged",(function(e){t.fullscreen=e.state}))},images_dataimg_filter:function(e){return e},images_upload_handler:function(e,t,a,i){i(0);var n=new FormData;n.append("file",e.blob(),e.filename()),_(n).then((function(e){t("".concat(g["c"].getImage,"/").concat(e.data.data.id)),i(100)})).catch((function(){a("图片上传失败！")}))}})},destroyTinymce:function(){var e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand("mceFullScreen"),e&&e.destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(e){var t=this;e.forEach((function(e){window.tinymce.get(t.tinymceId).insertContent('<img class="wscnph" src="'.concat(e.url,'" >'))}))}}},w=D,k=(a("3d1f"),a("2877")),C=Object(k["a"])(w,o,l,!1,null,"2c5ee166",null),O=C.exports,I=a("9d9a"),U=a("c48b");function j(e,t){return Object(v["a"])({url:"".concat(g["a"].runCode,"/").concat(e),method:"post",data:{sourceCode:t}})}var x={components:{codemirror:r["codemirror"],Tinymce:O},data:function(){return{updateAndDeleteProblemHintDialogVisible:!1,runCodeDialogVisible:!1,viewDatabaseDetailDialogVisible:!1,viewDatabaseDetailDialogTitle:"",databaseDetailCode:"",checkRules:{title:[{required:!0,message:"题目标题不能为空",trigger:"blur"},{max:100,message:"题目标题长度最大为100",trigger:"blur"}],difficulty:[{required:!0,message:"题目难度不能为空",trigger:"blur"}],description:[{required:!0,message:"题目描述不能为空",trigger:"blur"}],databaseId:[{required:!0,message:"数据库不能为空",trigger:"blur"}],answer:[{required:!0,message:"答案不能为空",trigger:"blur"}],isUpdate:[{required:!0,message:"必须确定题目是否带有Update操作",trigger:"blur"}]},cmOptions:{tabSize:4,mode:"text/x-mysql",theme:"solarized light",lineNumbers:!0,styleActiveLine:!0,lineWrapping:!0,indentWithTabs:!0,hintOptions:{completeSingle:!1},line:!0},problemDetail:{id:"",title:"",description:"",sampleOutput:"",hint:"",answer:"",databaseId:"",difficulty:1,isUpdate:!1,selectAfterUpdate:""},runResult:"",databaseList:[]}},computed:{codemirror:function(){return this.$refs.myCm.codemirror},isAdd:function(){return void 0===this.$route.params.id},problemId:function(){return this.$route.params.id}},mounted:function(){var e=this;this.isAdd||this.handleResponse(Object(I["d"])(this.problemId),"获取题目详情",(function(t){e.problemDetail=t.data,e.problemDetail.description||(e.problemDetail.description=""),e.problemDetail.sampleOutput||(e.problemDetail.sampleOutput=""),e.problemDetail.hint||(e.problemDetail.hint="")})),this.getDatabaseList()},methods:{isEmpty:function(e){return"undefined"===typeof e||null===e||""===e},onCmReady:function(e){e.on("keypress",(function(){e.showHint()}))},runCode:function(){var e=this;this.isEmpty(this.problemDetail.databaseId)?this.$message.error("请检查是否已选择数据库！"):this.isEmpty(this.problemDetail.answer)?this.$message.error("请检查SQL代码是否已输入！"):(this.runResult="",this.handleResponse(j(this.problemDetail.databaseId,this.problemDetail.answer),"调试运行",(function(t){var a=t.data,i=/\((.*?)\)/g,n=i.exec(a);while(n)e.runResult+=n[0]+"\r\n",n=i.exec(a);e.runCodeDialogVisible=!0})))},onSubmit:function(){var e=this;this.$refs.problemDetail.validate((function(t){if(t){var a={title:e.problemDetail.title.trim(),description:e.problemDetail.description.trim(),sampleOutput:e.problemDetail.sampleOutput.trim(),hint:e.problemDetail.hint.trim(),answer:e.problemDetail.answer,databaseId:e.problemDetail.databaseId,difficulty:e.problemDetail.difficulty,isUpdate:e.problemDetail.isUpdate,selectAfterUpdate:e.problemDetail.selectAfterUpdate};e.isAdd?e.handleResponse(Object(I["a"])(a.title,a.description,a.sampleOutput,a.hint,a.answer,a.databaseId,a.difficulty,a.isUpdate,a.selectAfterUpdate),"添加题目",(function(t){e.$message.success("添加题目成功"),e.$router.back(-1)})):e.handleResponse(Object(I["f"])(e.problemId,a.title,a.description,a.sampleOutput,a.hint,a.answer,a.databaseId,a.difficulty,a.isUpdate,a.selectAfterUpdate),"添加题目",(function(t){e.$message.success("更新题目成功"),e.$router.back(-1)}))}else e.$message.error("请确认所有项目均填写正确！")}))},onCancel:function(){this.$router.back(-1)},getDatabaseList:function(){var e=this;this.handleResponse(Object(U["c"])(),"获取数据库列表",(function(t){e.databaseList=t.data}))},getDatabaseDetail:function(e,t){var a=this;"createTable"===t?this.viewDatabaseDetailDialogTitle="查看建表语句":"testData"===t&&(this.viewDatabaseDetailDialogTitle="查看测试数据"),this.databaseDetailCode="",this.handleResponse(Object(U["e"])(e),"获取数据库详情",(function(e){0===e.code?(a.databaseDetailCode=e.data[t],a.viewDatabaseDetailDialogVisible=!0):a.$message.error(e.message)}))}}},A=x,$=(a("6ad2"),Object(k["a"])(A,i,n,!1,null,null,null));t["default"]=$.exports},"6ad2":function(e,t,a){"use strict";a("7a2d")},"7a2d":function(e,t,a){},"9d9a":function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"e",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return s})),a.d(t,"f",(function(){return c})),a.d(t,"b",(function(){return u}));var i=a("b775"),n=a("6793");function r(){return Object(i["a"])({url:n["a"].problemCount,method:"get"})}function o(e,t,a,r){var o={pageNum:e,pageSize:t};return a&&r&&(o[a]=r),Object(i["a"])({url:"".concat(n["a"].problemBase,"/"),method:"get",params:o})}function l(e){return Object(i["a"])({url:"".concat(n["a"].problemBase,"/").concat(e),method:"get"})}function s(e,t,a,r,o,l,s,c,u){return Object(i["a"])({url:"".concat(n["a"].problemBase,"/"),method:"post",data:{title:e,description:t,sampleOutput:a,hint:r,answer:o,databaseId:l,difficulty:s,isUpdate:c,selectAfterUpdate:u}})}function c(e,t,a,r,o,l,s,c,u,d){return Object(i["a"])({url:"".concat(n["a"].problemBase,"/").concat(e),method:"put",data:{title:t,description:a,sampleOutput:r,hint:o,answer:l,databaseId:s,difficulty:c,isUpdate:u,selectAfterUpdate:d}})}function u(e){return Object(i["a"])({url:"".concat(n["a"].problemBase,"/").concat(e),method:"delete"})}},b85c:function(e,t,a){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function n(e,t){if(e){if("string"===typeof e)return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?i(e,t):void 0}}function r(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=n(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,o=e},f:function(){try{l||null==a["return"]||a["return"]()}finally{if(s)throw o}}}}a.d(t,"a",(function(){return r}))},c48b:function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"f",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return s})),a.d(t,"g",(function(){return c})),a.d(t,"e",(function(){return u})),a.d(t,"b",(function(){return d}));var i=a("b775"),n=a("6793");function r(){return Object(i["a"])({url:n["a"].databaseCount,method:"get"})}function o(e,t,a,r){var o={pageNum:e,pageSize:t};return a&&r&&(o[a]=r),Object(i["a"])({url:"".concat(n["a"].databaseBase,"/"),method:"get",params:o})}function l(){return Object(i["a"])({url:n["a"].getAllDatabase,method:"get"})}function s(e,t,a){return Object(i["a"])({url:"".concat(n["a"].databaseBase,"/"),method:"post",data:{name:e,createTable:t,testData:a}})}function c(e,t,a,r){return Object(i["a"])({url:"".concat(n["a"].databaseBase,"/").concat(e),method:"put",data:{name:t,createTable:a,testData:r}})}function u(e){return Object(i["a"])({url:"".concat(n["a"].databaseBase,"/").concat(e),method:"get"})}function d(e){return Object(i["a"])({url:"".concat(n["a"].databaseBase,"/").concat(e),method:"delete"})}}}]);